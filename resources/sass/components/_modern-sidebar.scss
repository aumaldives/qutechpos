// Modern Sidebar Styles
// ===================

// CSS Variables for theme colors (support dynamic switching)
:root {
  // Light theme colors
  --sidebar-light-bg: #ffffff;
  --sidebar-light-border: #e3e6f0;
  --sidebar-light-text: #5a5c69;
  --sidebar-light-text-hover: #3a3b45;
  --sidebar-light-active-bg: #eaecf4;
  --sidebar-light-active-text: #5e72e4;
  --sidebar-light-header-bg: #f8f9fc;
  --sidebar-light-header-text: #6e707e;
  --sidebar-light-logo-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  
  // Dark theme colors
  --sidebar-dark-bg: #1e2139;
  --sidebar-dark-border: #2d3748;
  --sidebar-dark-text: #a0aec0;
  --sidebar-dark-text-hover: #e2e8f0;
  --sidebar-dark-active-bg: #2d3748;
  --sidebar-dark-active-text: #63b3ed;
  --sidebar-dark-header-bg: #171923;
  --sidebar-dark-header-text: #718096;
  --sidebar-dark-logo-bg: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
  
  // Shared
  --sidebar-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --sidebar-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --sidebar-border-radius: 8px;
}

// Theme switching animation - minimal, non-interfering
.theme-switching {
  transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out !important;
}

// Child menu item micro-animations
@keyframes childMenuSlideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes bulletPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

.modern-sidebar .treeview-menu {
  li > a {
    animation: childMenuSlideIn 0.3s ease-out both;
    
    // Stagger animation delay for each child
    &:nth-child(1) { animation-delay: 0.05s; }
    &:nth-child(2) { animation-delay: 0.1s; }
    &:nth-child(3) { animation-delay: 0.15s; }
    &:nth-child(4) { animation-delay: 0.2s; }
    &:nth-child(5) { animation-delay: 0.25s; }
    
    // Pulse effect on active bullet
    &.active::before {
      animation: bulletPulse 2s infinite ease-in-out;
    }
  }
}

// Modern Sidebar Base Styles (Default Light Theme)
.modern-sidebar {
  background: var(--sidebar-light-bg);
  border-right: 1px solid var(--sidebar-light-border);
  border-radius: 0 var(--sidebar-border-radius) var(--sidebar-border-radius) 0;
  box-shadow: var(--sidebar-shadow);
  transition: var(--sidebar-transition);
  
  // Modern logo styling
  .modern-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    text-decoration: none;
    background: var(--sidebar-light-logo-bg);
    color: white;
    font-weight: 600;
    border-radius: var(--sidebar-border-radius) var(--sidebar-border-radius) 0 0;
    transition: var(--sidebar-transition);
    position: relative;
    overflow: hidden;
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }
    
    &:hover::before {
      transform: translateX(100%);
    }
    
    .business-name, .business-initial {
      position: relative;
      z-index: 1;
    }
    
    .business-name {
      font-size: 1.1rem;
      letter-spacing: 0.5px;
    }
    
    .business-initial {
      font-size: 1.5rem;
      font-weight: 700;
    }
  }
  
  // Modern sidebar menu container
  .modern-sidebar-menu {
    padding: 1rem 0.5rem;
    
    .sidebar-menu {
      margin: 0;
      padding: 0;
      
      // Menu items
      > li {
        margin-bottom: 0.25rem;
        border-radius: var(--sidebar-border-radius);
        overflow: hidden;
        transition: var(--sidebar-transition);
        
        > a {
          padding: 0.75rem 1rem;
          display: flex;
          align-items: center;
          color: var(--sidebar-light-text);
          text-decoration: none;
          border-radius: var(--sidebar-border-radius);
          transition: var(--sidebar-transition);
          font-weight: 500;
          position: relative;
          
          &::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--sidebar-light-active-text);
            transform: scaleY(0);
            transition: transform 0.3s ease;
          }
          
          // Icon styling
          > .fa, > .glyphicon, > .ion {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
            font-size: 16px;
            transition: var(--sidebar-transition);
          }
          
          // Badge/Label styling
          .badge, .label {
            margin-left: auto;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-weight: 600;
          }
          
          &:hover {
            color: var(--sidebar-light-text-hover);
            background: var(--sidebar-light-active-bg);
            transform: translateX(4px);
            
            > .fa, > .glyphicon, > .ion {
              transform: scale(1.1);
            }
          }
        }
        
        // Active state
        &.active > a,
        &.menu-open > a {
          background: var(--sidebar-light-active-bg);
          color: var(--sidebar-light-active-text);
          font-weight: 600;
          
          &::before {
            transform: scaleY(1);
          }
        }
        
        // Header styling
        &.header {
          > a {
            background: var(--sidebar-light-header-bg);
            color: var(--sidebar-light-header-text);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            padding: 0.5rem 1rem;
            
            &::before {
              content: '';
              position: absolute;
              bottom: 0;
              left: 1rem;
              right: 1rem;
              height: 1px;
              background: linear-gradient(to bottom, var(--sidebar-light-active-text), transparent 70%);
            }
          }
        }
        
        // Treeview (child menu) styling
        &.treeview {
          .treeview-menu {
            background: transparent;
            margin: 0;
            padding: 0;
            border-radius: var(--sidebar-border-radius);
            overflow: hidden;
            
            li {
              margin: 0;
              position: relative;
              
              // Connection lines for visual hierarchy
              &::before {
                content: '';
                position: absolute;
                left: 1.5rem;
                top: 0;
                bottom: 0;
                width: 1px;
                background: var(--sidebar-light-header-bg);
                opacity: 0.5;
              }
              
              &:last-child::before {
                height: 50%;
              }
              
              > a {
                padding: 0.5rem 1rem 0.5rem 2.75rem;
                font-size: 0.875rem;
                color: var(--sidebar-light-text);
                position: relative;
                
                // Bullet point for child items
                &::before {
                  content: '';
                  position: absolute;
                  left: 1.375rem;
                  top: 50%;
                  transform: translateY(-50%);
                  width: 6px;
                  height: 6px;
                  background: var(--sidebar-light-text);
                  border-radius: 50%;
                  transition: var(--sidebar-transition);
                }
                
                &:hover {
                  color: var(--sidebar-light-text-hover);
                  background: rgba(0,0,0,0.02);
                  transform: translateX(2px);
                  
                  &::before {
                    background: var(--sidebar-light-active-text);
                    transform: translateY(-50%) scale(1.3);
                  }
                }
                
                &.active {
                  color: var(--sidebar-light-active-text);
                  font-weight: 600;
                  
                  &::before {
                    background: var(--sidebar-light-active-text);
                    transform: translateY(-50%) scale(1.5);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

// Dark theme specific styling for modern sidebar
.skin-blue .modern-sidebar,
.skin-black .modern-sidebar,
.skin-purple .modern-sidebar,
.skin-green .modern-sidebar,
.skin-red .modern-sidebar,
.skin-yellow .modern-sidebar {
  background: var(--sidebar-dark-bg);
  border-right-color: var(--sidebar-dark-border);
  
  .modern-logo {
    background: var(--sidebar-dark-logo-bg);
  }
  
  .modern-sidebar-menu {
    .sidebar-menu {
      > li {
        > a {
          color: var(--sidebar-dark-text);
          
          &::before {
            background: var(--sidebar-dark-active-bg);
          }
          
          &:hover {
            color: var(--sidebar-dark-text-hover);
            background: var(--sidebar-dark-active-bg);
          }
        }
        
        &.active > a,
        &.menu-open > a {
          background: var(--sidebar-dark-active-bg);
          color: var(--sidebar-dark-active-text);
          
          &::before {
            background: var(--sidebar-dark-active-text);
          }
        }
        
        &.header > a {
          background: var(--sidebar-dark-header-bg);
          color: var(--sidebar-dark-header-text);
          
          &::before {
            background: linear-gradient(to bottom, var(--sidebar-dark-active-text), transparent 70%);
          }
        }
        
        &.treeview {
          .treeview-menu {
            li {
              &::before {
                background: var(--sidebar-dark-header-bg);
              }
              
              > a {
                color: var(--sidebar-dark-text);
                
                &::before {
                  background: var(--sidebar-dark-text);
                }
                
                &:hover {
                  color: var(--sidebar-dark-text-hover);
                  background: rgba(255,255,255,0.05);
                  
                  &::before {
                    background: var(--sidebar-dark-active-text);
                  }
                }
                
                &.active {
                  color: var(--sidebar-dark-active-text);
                  
                  &::before {
                    background: var(--sidebar-dark-active-text);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

// Light theme specific styling
.skin-blue-light .modern-sidebar,
.skin-black-light .modern-sidebar,
.skin-purple-light .modern-sidebar,
.skin-green-light .modern-sidebar,
.skin-red-light .modern-sidebar {
  background: var(--sidebar-light-bg);
  border-right: 1px solid var(--sidebar-light-border);
  
  .modern-sidebar-menu {
    .sidebar-menu {
      > li {
        > a {
          color: var(--sidebar-light-text);
          
          &:hover {
            color: var(--sidebar-light-text-hover);
            background: var(--sidebar-light-active-bg);
          }
        }
        
        &.active > a,
        &.menu-open > a {
          background: var(--sidebar-light-active-bg);
          color: var(--sidebar-light-active-text);
        }
        
        &.header {
          color: var(--sidebar-light-header-text);
        }
      }
    }
  }
}

// Responsive design for mobile
@media (max-width: 767px) {
  .modern-sidebar {
    border-radius: 0;
    box-shadow: none;
    
    .modern-logo {
      border-radius: 0;
    }
    
    .modern-sidebar-menu {
      padding: 0.25rem;
      
      .sidebar-menu > li {
        margin-bottom: 0.125rem;
        
        > a {
          padding: 0.5rem 0.75rem;
          font-size: 0.875rem;
          
          > .fa, > .glyphicon, > .ion {
            margin-right: 0.5rem;
            font-size: 14px;
          }
          
          &:hover {
            transform: none;
          }
        }
        
        &.treeview .treeview-menu li > a {
          padding: 0.375rem 0.75rem 0.375rem 2.25rem;
          font-size: 0.8rem;
          
          &:hover {
            transform: none;
          }
        }
      }
    }
  }
}

// Special handling for mobile menu toggle
@media (max-width: 767px) {
  .modern-sidebar {
    .sidebar-menu {
      > li {
        &.treeview > .treeview-menu {
          background: rgba(0,0,0,0.05);
          margin-top: 0.25rem;
          padding: 0.25rem 0;
          border-radius: var(--sidebar-border-radius);
          
          .skin-blue &,
          .skin-black &,
          .skin-purple &,
          .skin-green &,
          .skin-red &,
          .skin-yellow & {
            background: rgba(255,255,255,0.05);
          }
        }
      }
    }
  }
}

// Print styles - hide sidebar when printing
@media print {
  .modern-sidebar {
    display: none !important;
  }
}